<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>淘宝首页 Canvas 滑动轮播示例</title>
<style>
  body {
    margin: 0;
    background-color: #f5f5f5;
    overflow: hidden;
  }
  canvas {
    display: block;
    margin: 0 auto;
    background-color: white;
    touch-action: none; /* 防止移动端默认滚动 */
  }
</style>
</head>
<body>
<canvas id="taobaoCanvas" width="360" height="640"></canvas>
<script>
const canvas = document.getElementById('taobaoCanvas');
const ctx = canvas.getContext('2d');

const width = canvas.width;
const height = canvas.height;

// 页面内容高度
const contentHeight = 900;

// 滑动控制
let offsetY = 0;
let startY = 0;
let isDragging = false;

canvas.addEventListener('pointerdown', e => {
  isDragging = true;
  startY = e.clientY;
});
canvas.addEventListener('pointermove', e => {
  if(isDragging){
    let dy = e.clientY - startY;
    startY = e.clientY;
    offsetY += dy;
    offsetY = Math.min(0, Math.max(height - contentHeight, offsetY));
  }
});
canvas.addEventListener('pointerup', e => { isDragging = false; });
canvas.addEventListener('pointerleave', e => { isDragging = false; });

// Banner轮播
const banners = ['#ff6666', '#66ccff', '#ffcc66'];
let bannerIndex = 0;
let bannerTimer = 0;

function draw() {
  ctx.clearRect(0, 0, width, height);

  ctx.save();
  ctx.translate(0, offsetY);

  // 顶部搜索栏
  ctx.fillStyle = '#ff5000';
  ctx.fillRect(0, 0, width, 60);
  ctx.fillStyle = 'white';
  ctx.font = '20px sans-serif';
  ctx.fillText('淘宝', 10, 35);

  // 搜索框
  ctx.fillStyle = '#fff';
  ctx.fillRect(60, 15, 280, 30);
  ctx.strokeStyle = '#ccc';
  ctx.strokeRect(60, 15, 280, 30);
  ctx.fillStyle = '#999';
  ctx.font = '14px sans-serif';
  ctx.fillText('搜索商品/店铺', 70, 35);

  // Banner轮播图
  ctx.fillStyle = banners[bannerIndex];
  ctx.fillRect(0, 60, width, 120);
  ctx.fillStyle = 'white';
  ctx.font = '24px sans-serif';
  ctx.fillText('轮播图', 130, 130);

  // 分类图标
  const categories = ['女装', '男装', '鞋包', '美妆', '家电', '母婴'];
  categories.forEach((text, i) => {
    ctx.fillStyle = '#ffd700';
    ctx.beginPath();
    ctx.arc(40 + i*60, 200, 25, 0, Math.PI*2);
    ctx.fill();
    ctx.fillStyle = 'black';
    ctx.font = '12px sans-serif';
    ctx.fillText(text, 25 + i*60, 205);
  });

  // 商品列表
  for(let row = 0; row < 3; row++) {
    for(let col = 0; col < 2; col++) {
      const x = 10 + col * 175;
      const y = 240 + row * 150;
      ctx.fillStyle = '#eee';
      ctx.fillRect(x, y, 160, 120);
      ctx.fillStyle = '#999';
      ctx.fillText('商品图片', x + 40, y + 60);
      ctx.fillStyle = 'black';
      ctx.font = '14px sans-serif';
      ctx.fillText('商品名称', x, y + 135);
      ctx.fillStyle = 'red';
      ctx.fillText('￥99.9', x, y + 155);
    }
  }

  ctx.restore();

  // Banner轮播计时
  bannerTimer++;
  if(bannerTimer > 120){ // 每2秒切换一次
    bannerIndex = (bannerIndex + 1) % banners.length;
    bannerTimer = 0;
  }

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>